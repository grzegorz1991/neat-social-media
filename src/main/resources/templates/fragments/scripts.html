<script src="/vendors/js/vendor.bundle.base.js"></script>
<!-- endinject -->
<!-- Plugin js for this page -->
<script src="/vendors/chart.js/Chart.min.js"></script>
<script src="/vendors/progressbar.js/progressbar.min.js"></script>
<script src="/vendors/jvectormap/jquery-jvectormap.min.js"></script>
<script src="/vendors/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<script src="/vendors/owl-carousel-2/owl.carousel.min.js"></script>
<!-- End plugin js for this page -->
<!-- inject:js -->
<script src="/js/off-canvas.js"></script>
<script src="/js/hoverable-collapse.js"></script>
<script src="/js/misc.js"></script>
<script src="/js/settings.js"></script>
<script src="/js/todolist.js"></script>
<!-- endinject -->
<!-- Custom js for this page -->
<script src="/js/dashboard.js"></script>
<!-- End custom js for this page -->


<script>

    function loadDefaultContent() {
        fetch('/home/default-fragment')
            .then(response => response.text())
            .then(data => {
                document.getElementById('dynamicContent').innerHTML = data;
            })
            .catch(error => console.error('Error:', error));
    }

    function loadSettings() {
        // Fetch the settings content using Thymeleaf's fragment include
        fetch('/home/settings-fragment')
            .then(response => response.text())
            .then(data => {
                // Inject the loaded content into the dynamicContent div
                document.getElementById('dynamicContent').innerHTML = data;
            })
            .catch(error => console.error('Error:', error));
    }

    // Function to attach event listener to logo
    function attachLogoClickListener() {
        const logoElement = document.querySelector('.sidebar-brand.brand-logo');

        if (logoElement) {
            logoElement.addEventListener('click', function (event) {
                // Prevent the default link behavior
                event.preventDefault();
                // Load default content
                loadDefaultContent();
            });
        }
    }


    // Example: Load settings content when the page loads
    document.addEventListener('DOMContentLoaded', function () {
        loadDefaultContent();
        attachLogoClickListener();

        // Check if there is an error parameter in the URL
        const url = new URL(window.location.href);
        const errorParam = url.searchParams.get('error');

        if (errorParam) {
            // Load settings content with error message
            loadSettings(errorParam);
        } else {
            // Load default content if no error parameter
            loadDefaultContent();
        }

        // Attach event listener to logo
        attachLogoClickListener();
    });

    //Load settings sub- content when the button is clicked
    document.getElementById('settingsDropdownItem').addEventListener('click', function (event) {
        event.preventDefault();
        loadSettings();
    });

</script>